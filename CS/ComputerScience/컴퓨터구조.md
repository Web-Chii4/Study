# 컴퓨터 구조

컴퓨터는 거시적인 관점에서 크게 3가지로 나뉜다.

- 중앙 처리 장치
- 기억 장치
- 입출력 장치

각각의 장치들이 서로 상호작용하며 컴퓨터가 동작하게 된다.

## 1. 중앙처리장치

중앙처리장치는 CPU를 뜻한다. CPU내부에는 다수의 장치와 레지스터들이 존재하며 이들이 서로 상호작용하며 기억 장치, 입출력 장치와 상호작용 할 수 있다.

### 중앙처리장치 구조

중앙 처리 장치의 구조는 크게 다음과 같다.

- 처리 장치(Process Unit)
- 연산 장치(ALU)
- 레지스터

### 처리장치(Control Unit)

> 제어 신호를 보내는 장치로, 메모리로부터 명령어를 읽고 해석해 제어신호를 입출력 장치 혹은 기억장치에 제어신호를 보내 처리를 이룬다.
>

### 연산 장치(**Arithmetic Logical Unit)**

> 연산을 이루는 장치로, 산술 연산, 논리 연산 등의 연산을 수행하는 장치이다.
>

### 레지스터

> CPU의 연산, 메모리 접근을 위해 필요한 데이터(메모리 주소, 연산 중간 데이터 등)들을 잠시 저장하기 위한 공간이다.
>

레지스터의 종류는 정말 다양한데 크게 두 가지로 분류할 수 있다.

- 특수 레지스터
- 범용 레지스터

**특수 레지스터**

> 특수 레지스터는 CPU의 동작을 제어하고 상태를 관리하기 위해 사용되는 레지스터이다. 명령어의 실행 흐름, 연산 상태, 메모리 접근 정보 등을 유지하는 역할을 한다.
>
- PC(Program Couter) : CPU가 다음에 실행할 명령어의 주소를 저장
- IR(Instruction Register) : CPU가 현재 실행중인 명령어
- MAR(Memory Address Register) : 메모리에 읽기 및 쓰기를 위한 주소를 저장한다.
- MBR(Memory Buffer Register) : 메모리에 읽기 및 쓰기를 위한 데이터를 저장한다.
- SP(Stack Pointer) : 스택의 현재 위치
- BP(Base Pointer) : 스택의 Bottom위치

**범용 레지스터**

> 범용 레지스터는 **연산 과정에서 필요한 데이터**나 **중간 결과**를 임시로 저장하기 위한 레지스터이다. 프로그램 실행 중 자유롭게 활용 가능하며, 산술 논리 연산을 수행할 때 가장 자주 사용된다.
>

**용도)**

- 연산용 데이터 저장
- 연산 중간 결과 저장
- 주소 계산

**종류)**

- RAX : 연산 결과 저장
- RBX : 데이터 임시 저장
- RCX : 반복문 카운터
- RDX : 곱셉, 나눗셈 보조

등등

## 2. 기억 장치

> 기억장치는 프로그램 실행 중, 프로그램 실행을 위한 데이터들을 기억하기 위한 장치들이다.
>

종류는 크게 2가지로 구분된다.

- **주기억장치**
- **보조기억장치**

### 주기억 장치

주기억장치는 대표적으로 RAM과 ROM 2가지로 구분된다.

**RAM(휘발성 메모리)**

> RAM은 ROM에 비해 빠른 접근 속도를 지니며, 프로그램이 실행될 때 적재되는 공간이다.
>

RAM에는 또 2가지의 종류가 존재한다.

**SRAM(Static RAM)**

> SRAM은 **플립 플롭 반도체 소자 기반 메모리**로, 전류가 흐르지 않을 시 데이터는 모두 날아가게 되는 특징이 있다.
>

SRAM은 가격이 비싸지만, DRAM에 비해 빠르고 전력 소모는 적고 용량 또한 작다. 이러한 특징으로 인해 더 빠른 속도가 요구되는 L1, L2, L3캐시에 사용된다.

**DRAM(Dynamic RAM)**

> DRAM은 **커패시터(축전지) 반도체 소자 기반 메모리**로, 충전 시켜야 사용할 수 있다는 특징이 있다. 전류가 흐르지 않게 되면 점점 방전되며 휘발된다.
>

DRAM은 가격이 저렴하지만 SRAM에 비해 느리고 전력 소모가 크며 용량은 크다. 이러한 특징으로 인해 일반적으로 사용되는 RAM으로 잘 사용된다.

**ROM(비휘발성 메모리)**

> 컴퓨터의 BIOS / UEFI **와 같은 초기 부팅 정보**나 스마트폰, 가전제품 등 **기기 작동에 필요한 펌웨어**를 저장하는 데 사용된다.
>

특히, ROM은 데이터 저장을 위해 하나만 사용되는 것이 아니라 저장되는 데이터의 용도에 맞는 각각의 ROM메모리를 사용한다.

- BIOS / UEFI ROM : PC메인보드 위에 존재하는 ROM으로 부팅 시 CPU가 가장 먼저 읽는 코드를 저장한다.
- 장치 컨트롤러 ROM : GPU BIOS, SSD컨트롤러 ROM, 키보드 마우스 등의 펌웨어를 저장하는 ROM이다.

### 보조기억장치

보조 기억 장치는 **컴퓨터의 전원이 꺼져도 데이터가 영구적으로 저장되는 장치**로 컴퓨터 동작을 위한 펌웨어가 아닌 사용자 수준의 프로그램 데이터들을 저장한다.

대표적으로 잘 알려진 보조기억장치는 SSD, HDD가 있다.

**SSD(Solid State Drive)**

> 반도체 칩(NAND Flash)에 전기적으로 데이터를 저장하는 장치로, 물리적인 장치 없이 전자적으로 이를 수행한다.
>

<img width="300" height="168" alt="Image" src="https://github.com/user-attachments/assets/cc567a30-5aa2-43c8-83e6-7701087e9af1" />

장점)

- HDD에 비해 빠른 속도를 보인다.(약 50 ~ 100배 이상의 성능)
- 충격에 강하다
- 전력 소모가 적다
- 소음이 없다.
- 접근 속도가 빠르다.

단점)

- HDD보다 비싸다.
- NAND Flash의 쓰기 수명은 제한적이다. → 원리 알아보면 좋을듯

**HDD(Hard Disk Drive)**

> 자기디스크(플래터)를 고속으로 회전시키고, 그 위에 자성을 기록해 데이터를 저장하는 방식의 저장장치이다.
>

<img width="290" height="174" alt="Image" src="https://github.com/user-attachments/assets/6fa9e30d-2774-4b06-9ebe-28bf873de1e3" />

**플래터**: 자기적으로 데이터를 저장한다.

**스핀들 모터**: 플래터 회전

**헤드**: 플래터 위를 움직이며 데이터를 읽고 쓴다.

**액추에이터**: 헤드의 움직임을 제어한다.

장점)

- 용량 대비 가격이 싸다.
- 대용량 데이터 저장에 좋다.

단점)

- 물리적으로 동작하기 때문에 느리다.
- 충격에 약하다.
- 발열과 소음이 발생한다.
- 지연 시간이 크다.

## 3. 입출력 장치(I/O Device)

CPU와 메모리(RAM) 외부에 존재하며, **I/O 컨트롤러를 통해 CPU와 데이터를 주고받는 모든 장치**이다. 따라서, 단순히 입출력 장치만을 포함하지 않고 네트워크, 저장 장치, 보조 처리 장치 등 또한 포함될 수 있다.

여기서 I/O는 입출력을 의미하는데 사용자 관점에서의 입출력(마우스, 키보드 등)을 의미하는게 아니라, CPU와 상호작용의 관점에서 I/O를 의미한다. CPU에게 입력으로 데이터를 주거나 CPU가 데이터를 출력하는 장치들을 포괄적으로 의미한다.

<img width="610" height="126" alt="Image" src="https://github.com/user-attachments/assets/604363dc-2373-44ee-af67-0c7f54396375" />

I/O컨트롤러: 각 I/O장치를 제어하는 컨트롤러로, 제어신호를 받아 그에 맞는 동작을 이룬다.

### 입력장치

키보드, 마우스, 터치패드, 센서 등

### 출력 장치

모니터, 프린터, 스피커

### 저장 장치

SSD, HDD, USB

### 네트워크 장치

NIC, Wi-Fi모듈, LAN카드

### 보조 처리 장치

GPU, TPU/NPU 등

### 입출력 장치 동작 원리

1. 컴퓨터 부팅 시 I/O장치들을 BIOS / UEFI가 읽은 후 MMIO(Memory Mapped I/O) 주소를 만든다.
    - PCIe 장치의 Configuration Space를 읽어 Vendor ID, Device ID 등을 파악한다.
    - BAR(Base Address Register) 레지스터에 **MMIO 물리 주소**를 기록한다.
2. 커널은 부팅 시 BIOS / UEFI가 설정한 BAR값을 읽고 **장치 테이블을 만든다**.
    - BIOS가 BAR에 설정한 값을 커널이 다시 읽는다.
    - 이 정보를 기반으로 커널 내부에 장치 구조체(Device Table)를 만든다 (MMIO주소를 읽고 저장하는 것이 핵심) → 디바이스 테이블은 커널 메모리에 적재된다.
3. 드라이버는 장치 테이블에서 자신의 MMIO주소를 받는다.
4. 드라이버는 해당 주소를 바탕으로 CPU에게 MMIO 쓰기 / 읽기 동작을 수행하도록 만든다.
5. CPU는 해당 주소에 값을 씀으로써 I/O컨트롤러가 그에 맞는 동작을 이루도록 만든다.